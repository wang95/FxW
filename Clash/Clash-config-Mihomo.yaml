# Clash é…ç½®æ–‡ä»¶ By Wang95
# é€‚ç”¨äº Mihomo å†…æ ¸
# 2025-06-14

# å‚è€ƒï¼š
# https://wiki.metacubex.one/config/
# https://clash.wiki/configuration/configuration-reference.html
# https://github.com/MetaCubeX/mihomo/blob/Meta/docs/config.yaml
# https://github.com/Rabbit-Spec/Clash/blob/Master/Yaml/Clash_Max.yaml

# port: 7891
# socks-port: 7892
mixed-port: 7890
# redir-port: 7893
# tproxy-port: 7894

allow-lan: false
mode: rule
log-level: info
ipv6: true

external-controller: 127.0.0.1:9090
external-ui: ui
# external-ui-name: metacubexd
# external-ui-url: 'https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip'
external-ui-name: zashboard
external-ui-url: 'https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip'
secret: yoursecret

proxies:
  - name: ğŸ‡ºğŸ‡¸ LA-SS
    type: ss
    server: 0.0.0.0
    port: 445
    cipher: chacha20-ietf-poly1305
    password: pwd

  - name: ğŸ‡ºğŸ‡¸ LA-Snell
    type: snell
    server: 0.0.0.0
    port: 445
    psk: xxxxx
    version: 2
    obfs-opts:
      mode: http # æˆ– tls
      host: cloudfront.net

  - name: Office1
    type: ss
    server: 0.0.0.0
    port: 445
    cipher: aes-256-gcm
    password: pwd

  - name: Office2
    type: ss
    server: 0.0.0.0
    port: 445
    cipher: aes-256-gcm
    password: pwd

# é”šç‚¹ - èŠ‚ç‚¹è®¢é˜…å‚æ•° [æ¯12å°æ—¶æ›´æ–°ä¸€æ¬¡è®¢é˜…èŠ‚ç‚¹ï¼Œæ¯ 300 ç§’ä¸€æ¬¡å¥åº·æ£€æŸ¥]
NodeParam: &NodeParam {type: http, interval: 43200, health-check: {enable: true, url: 'http://www.gstatic.com/generate_204', interval: 300}}

# é”šç‚¹ - èŠ‚ç‚¹è®¢é˜…
proxy-providers:
  Sub1:
    <<: *NodeParam
    url: "https://exmaple.com/proxygroup.list"
    path: ./proxy_providers/sub1.yaml
    # override:
    #   additional-prefix: "[P1]"
    #   additional-suffix: " | main"

  Sub2:
    <<: *NodeParam
    url: "https://exmaple.com/proxygroup.list"
    path: ./proxy_providers/sub2.yaml
    # override:
    #   additional-prefix: "[P2]"
    #   additional-suffix: " | test"

# é”šç‚¹ - èŠ‚ç‚¹ç­›é€‰ç»„
FilterHK: &FilterHK '(?i)(?:ğŸ‡­ğŸ‡°|é¦™æ¸¯|\b(?:HK|Hong)\b)'
FilterJP: &FilterJP '(?i)(?:ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|\b(?:JP|Japan)\b)'
FilterKR: &FilterKR '(?i)(?:ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|é¦–å°”|\b(?:KR|Korea)\b)'
FilterSG: &FilterSG '(?i)(?:ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|\b(?:SG|Singapore)\b)'
FilterUS: &FilterUS '(?i)(?:ğŸ‡ºğŸ‡¸|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|\b(?:US|United States|LA|Los Angeles|San Jose)\b)'
FilterUK: &FilterUK '(?i)(?:ğŸ‡¬ğŸ‡§|è‹±å›½|ä¼¦æ•¦|\b(?:UK|United Kingdom)\b)'
FilterFR: &FilterFR '(?i)(?:ğŸ‡«ğŸ‡·|æ³•å›½|\b(?:FR|France)\b)'
FilterDE: &FilterDE '(?i)(?:ğŸ‡©ğŸ‡ª|å¾·å›½|æ³•å…°å…‹ç¦|\b(?:DE|Germany)\b)'
FilterGame: &FilterGame '(?i)(?:ğŸ®|æ¸¸æˆ|\b(?:GAME|GAMING)\b)'
FilterAll: &FilterAll '(?i)^(?:(?!ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|\b(?:USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)\b).)*$'

FilterExcludeHK: &FilterExcludeHK '(?i)^(?:(?!ğŸ‡­ğŸ‡°|é¦™æ¸¯|\b(?:HK|Hong)\b).)*$'
FilterExcludeHK2: &FilterExcludeHK2 '(?i)^(?:(?!ğŸ‡­ğŸ‡°|é¦™æ¸¯|ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|\b(?:HK|Hong|USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)\b).)*$'

# é”šç‚¹ - è‡ªåŠ¨é€‰æ‹©ç­–ç•¥ç»„(è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½èŠ‚ç‚¹) å‚æ•°
Auto: &Auto {type: url-test, url: 'http://www.gstatic.com/generate_204', interval: 300, tolerance: 100}
# é”šç‚¹ - æ•…éšœè½¬ç§»ç­–ç•¥ç»„(æŒ‰ä»£ç†é¡ºåºé€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨èŠ‚ç‚¹) å‚æ•°
FallBack: &FallBack {type: fallback, url: 'http://www.gstatic.com/generate_204', interval: 300}

# é”šç‚¹ - è§„åˆ™é›† å‚æ•° [æ¯å¤©æ›´æ–°ä¸€æ¬¡è§„åˆ™é›†ï¼Œæ›´æ–°è§„åˆ™æ—¶ä½¿ç”¨çš„ç­–ç•¥ï¼šç›´è¿(DIRECT)/ä»£ç†]
RuleSet: &RuleSet {type: http, behavior: classical, interval: 86400, format: yaml, proxy: ğŸŒPROXY}

proxy-groups:
  - {name: ğŸŒPROXY, type: select, proxies: [Sub1, Sub2, Auto, Fallback, Self-Hosted], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Proxy.png'}
  - {name: Sub1, type: select, use: [Sub1], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Airport.png'}
  - {name: Sub2, type: select, use: [Sub2], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Airport.png'}
  - {name: Self-Hosted, type: select, proxies: [ğŸ‡ºğŸ‡¸ LA-Snell, ğŸ‡ºğŸ‡¸ LA-SS], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Rocket.png'}

  - {name: Auto, <<: *Auto, filter: *FilterAll, use: [Sub1, Sub2], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Auto.png'}
  - {name: Fallback, <<: *FallBack, filter: *FilterAll, use: [Sub1, Sub2], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Available_1.png'}
  - {name: US, type: select, filter: *FilterUS, use: [Sub1, Sub2], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png'}
  - {name: ExcludeHK, type: select, filter: *FilterExcludeHK2, use: [Sub1, Sub2], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Filter.png'}
  - {name: US-FallBack, <<: *FallBack, filter: *FilterUS, use: [Sub1, Sub2], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Available_1.png'}
  - {name: ExcludeHK-FallBack, <<: *FallBack, filter: *FilterExcludeHK2, use: [Sub1, Sub2], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Available_1.png'}

  - {name: Media, type: select, proxies: [ğŸŒPROXY, Self-Hosted], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Media.png'}
  - {name: OpenAI, type: select, proxies: [ğŸŒPROXY, ExcludeHK, ExcludeHK-FallBack, Self-Hosted, DIRECT], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/ChatGPT.png'}
  - {name: PayPal, type: select, proxies: [ğŸŒPROXY, US, US-FallBack, Self-Hosted, DIRECT], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/PayPal.png'}
  - {name: Hijacking, type: select, proxies: [DIRECT, REJECT], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hijacking.png'}
  - {name: Work, type: select, proxies: [DIRECT, Yitong, Yitong-CMCC], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Server.png'}
  - {name: Final, type: select, proxies: [ğŸŒPROXY, DIRECT], icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png'}

rule-providers:
  fix:
    <<: *RuleSet
    url: https://cdn.jsdelivr.net/gh/wang95/FxW/Clash/ruleset/fix.yaml
    path: ./ruleset/fix.yaml

  hijacking:
    <<: *RuleSet
    url: https://cdn.jsdelivr.net/gh/wang95/FxW/Clash/ruleset/hijacking.yaml
    path: ./ruleset/hijacking.yaml

  media:
    <<: *RuleSet
    url: https://cdn.jsdelivr.net/gh/wang95/FxW/Clash/ruleset/media.yaml
    path: ./ruleset/media.yaml

  OpenAI:
    <<: *RuleSet
    url: https://cdn.jsdelivr.net/gh/wang95/FxW/Clash/ruleset/OpenAI.yaml
    path: ./ruleset/OpenAI.yaml

  PayPal:
    <<: *RuleSet
    url: https://cdn.jsdelivr.net/gh/wang95/FxW/Clash/ruleset/PayPal.yaml
    path: ./ruleset/PayPal.yaml

  proxy:
    <<: *RuleSet
    url: https://cdn.jsdelivr.net/gh/wang95/FxW/Clash/ruleset/proxy.yaml
    path: ./ruleset/proxy.yaml

  domestic:
    <<: *RuleSet
    url: https://cdn.jsdelivr.net/gh/wang95/FxW/Clash/ruleset/domestic.yaml
    path: ./ruleset/domestic.yaml

rules:
  - IP-CIDR,192.168.5.253/32,Work
  - IP-CIDR,10.1.1.0/24,Work
  - RULE-SET,fix,DIRECT
  - RULE-SET,hijacking,Hijacking
  - RULE-SET,media,Media
  - RULE-SET,OpenAI,OpenAI
  - RULE-SET,PayPal,PayPal
  - RULE-SET,proxy,ğŸŒPROXY
  - RULE-SET,domestic,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,100.64.0.0/10,DIRECT
  - IP-CIDR,224.0.0.0/4,DIRECT
  - IP-CIDR,119.28.28.28/32,DIRECT
  - IP-CIDR,182.254.116.0/24,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Final
